import math
import random
import time
from multiprocessing.pool import Pool

def sample(pontos):
    ponto_circ = 0
    for _ in range(pontos):
        x, y = random.uniform(-1, 1), random.uniform(-1, 1)
        if math.hypot(x, y) <= 1:
            ponto_circ += 1
    return ponto_circ

def approximate_pi_parallel(pontos):
    pool = Pool()
    start = time.time()
    worker = 0
    ponto_circ = 0
    pontos_p_processo = 100000
    for result in pool.map(sample, [pontos_p_processo for _ in range(pontos//pontos_p_processo)]):
        ponto_circ += result
        worker = worker+1
        
    pi = ((4*ponto_circ)/pontos)

    print("pi aproximado = ", pi)
    print("numero de processos = ", worker)
    print("Tempo de execucao: {:.2f}s".format(time.time()-start));
